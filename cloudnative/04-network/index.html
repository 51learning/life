
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.361way.com/cloudnative/04-network/">
      
      
        <link rel="prev" href="../cce-network/">
      
      
        <link rel="next" href="../05-scale-cce/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>k8s network - 小杨同学的wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>



    
    

      
    
<script src="../../assets/pymdownx-extras/material-extra-theme-TVq-kNRT.js" type="text/javascript"></script>
<script src="../../assets/pymdownx-extras/material-extra-3rdparty-E-i8w1WA.js" type="text/javascript"></script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/pymdownx-extras/extra-ed665380f8.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-service-types-and-application-scenarios" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      


<header class="md-header" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="header.title"
  >
    <a
      href="https://wiki.361way.com/"
      title="小杨同学的wiki"
      class="md-header__button md-logo"
      aria-label="小杨同学的wiki"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            小杨同学的wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              k8s network
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon">
          <a
            href="javascript:toggleScheme();"
            title="Light mode"
            class="light-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
          </a>
          <a
            href="javascript:toggleScheme();"
            title="Dark mode"
            class="dark-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
          </a>
          <a
            href="javascript:toggleScheme();"
            title="System preference"
            class="system-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"/></svg>
          </a>
           <a
            href="javascript:toggleScheme();"
            title="Unknown scheme"
            class="unknown-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg>
          </a>
      </div>
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../00-contents/" class="md-tabs__link">
          
  
  HuaweiCloud

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../kubernetes/kubectl/" class="md-tabs__link">
          
  
  kubernetes

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ecology/provider/cloudflare/" class="md-tabs__link">
          
  
  云生态

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="小杨同学的wiki" class="md-nav__button md-logo" aria-label="小杨同学的wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    小杨同学的wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    HuaweiCloud
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            HuaweiCloud
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    cloudnative
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            cloudnative
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../00-contents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    content
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../01-terraform-createcce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    terraform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../02-Container-Registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    container registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../03-codearts-deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CodeArts deploy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../cce-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cce network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    k8s network
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    k8s network
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-service-types-and-application-scenarios" class="md-nav__link">
    1. Service Types and Application Scenarios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-clusters-via-console-or-commands" class="md-nav__link">
    Manage clusters via console or commands
  </a>
  
    <nav class="md-nav" aria-label="Manage clusters via console or commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterip" class="md-nav__link">
    ClusterIP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport" class="md-nav__link">
    nodeport
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer" class="md-nav__link">
    loadbalancer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-elb-ingress-nginx-ingress" class="md-nav__link">
    2. ELB Ingress &amp; Nginx Ingress
  </a>
  
    <nav class="md-nav" aria-label="2. ELB Ingress & Nginx Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elb-ingress" class="md-nav__link">
    ELB Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-ingress" class="md-nav__link">
    Nginx Ingress
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../05-scale-cce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cce scale
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../06-velero-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    velero backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../07-monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    monitor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../08-apig/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    api gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../09-ucs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ucs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../QingTian-Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    qingtian
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    command
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            command
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/koocli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    koocli
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    base
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            base
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubectl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubectl 命令的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    labels 标签
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/configmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 configmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/configmap-fromfile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    configmap 读取文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/k8s-set-env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    配置 environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/registry-secret/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    镜像仓 registry 认证
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/k8s-hpa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pod水平扩展 hpa
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    云生态
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            云生态
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    云厂商及周边
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            云厂商及周边
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ecology/provider/cloudflare/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    云厂商cloudflare
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-service-types-and-application-scenarios" class="md-nav__link">
    1. Service Types and Application Scenarios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-clusters-via-console-or-commands" class="md-nav__link">
    Manage clusters via console or commands
  </a>
  
    <nav class="md-nav" aria-label="Manage clusters via console or commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterip" class="md-nav__link">
    ClusterIP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport" class="md-nav__link">
    nodeport
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer" class="md-nav__link">
    loadbalancer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-elb-ingress-nginx-ingress" class="md-nav__link">
    2. ELB Ingress &amp; Nginx Ingress
  </a>
  
    <nav class="md-nav" aria-label="2. ELB Ingress & Nginx Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elb-ingress" class="md-nav__link">
    ELB Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-ingress" class="md-nav__link">
    Nginx Ingress
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  
                  


  <h1>k8s network</h1>

<h2 id="1-service-types-and-application-scenarios">1. Service Types and Application Scenarios</h2>
<p>Services of the ClusterIP, NodePort, LoadBalancer, and Headless Service types offer different functions.</p>
<ul>
<li>ClusterIP: used to make the Service only reachable within a cluster.</li>
<li>NodePort: used for access from outside a cluster. A NodePort Service is accessed through the port on the node. For details, see <a href="https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0024.html#kubernetes_0024__section1175215413159">NodePort Services</a>.</li>
<li>LoadBalancer: used for access from outside a cluster. It is an extension of NodePort, to which a load balancer routes, and external systems only need to access the load balancer. For details, see <a href="https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0024.html#kubernetes_0024__section7151144411279">LoadBalancer Services</a>.</li>
<li>Headless Service: used by pods to discover each other. No separate cluster IP address will be allocated to this type of Service, and the cluster will not balance loads or perform routing for it. You can create a headless Service by setting the <strong>spec.clusterIP</strong> value to <strong>None</strong>. For details, see <a href="https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0024.html#kubernetes_0024__section10301171915541">Headless Services</a>.</li>
</ul>
<p>we can use kubectl expose command setting this, And we can setting use console also.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># When using the NodePort type, the port here is meaningless. When accessing through a node, you need to actually view the corresponding NodePort. </span>
<span class="c1"># This port parameter is only use for internal access when set the nodeport </span>
kubectl<span class="w"> </span>expose<span class="w"> </span>deployment<span class="w"> </span>deployment-name<span class="w"> </span>--port<span class="o">=</span><span class="m">30080</span><span class="w"> </span>--target-port<span class="o">=</span><span class="m">80</span><span class="w"> </span>--name<span class="o">=</span>service-name<span class="w"> </span>--type<span class="o">=</span>NodePort
kubectl<span class="w"> </span>expose<span class="w"> </span>--type<span class="o">=</span>NodePort<span class="w"> </span>deployment<span class="w"> </span>nginx<span class="w"> </span>--port<span class="w"> </span><span class="m">80</span><span class="w"> </span>--name<span class="w"> </span>nginx-nodeport<span class="w">  </span>--overrides<span class="w"> </span><span class="s1">&#39;{ &quot;apiVersion&quot;: &quot;v1&quot;,&quot;spec&quot;:{&quot;ports&quot;: [{&quot;port&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;,&quot;targetPort&quot;:80,&quot;nodePort&quot;:30080}]}}&#39;</span>

kubectl<span class="w"> </span>expose<span class="w"> </span>deployment<span class="w"> </span>deployment-name<span class="w"> </span>--port<span class="o">=</span><span class="m">80</span><span class="w"> </span>--target-port<span class="o">=</span><span class="m">80</span><span class="w"> </span>--name<span class="o">=</span>service-name<span class="w"> </span>--type<span class="o">=</span>ClusterIP
kubectl<span class="w"> </span>expose<span class="w"> </span>deployment<span class="w"> </span>hello-world<span class="w"> </span>--port<span class="w"> </span><span class="m">80</span><span class="w"> </span>--type<span class="o">=</span>LoadBalancer

<span class="c1"># we can create a service and modify the selector </span>
kubectl<span class="w"> </span>create<span class="w"> </span>service<span class="w"> </span>nodeport<span class="w"> </span>myservice<span class="w"> </span>--node-port<span class="o">=</span><span class="m">31000</span><span class="w"> </span>--tcp<span class="o">=</span><span class="m">3000</span>:80
</code></pre></div></td></tr></table></div>
<h2 id="manage-clusters-via-console-or-commands">Manage clusters via console or commands</h2>
<p>We can see the Cluster Information &rarr; Resources &rarr; Connection Information &rarr; kubectl, And then get the more details informations about configure kubectl.</p>
<p><a class="glightbox" href="../images/kubectl-manager.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="kubectl" src="../images/kubectl-manager.png" /></a></p>
<p><a class="glightbox" href="../images/access-through-service.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="access through service" src="../images/access-through-service.png" /></a></p>
<p>When we finished all the steps, we can use commands operate the CCE cluster:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get ns</span>
NAME<span class="w">              </span>STATUS<span class="w">   </span>AGE
default<span class="w">           </span>Active<span class="w">   </span>32h
kube-node-lease<span class="w">   </span>Active<span class="w">   </span>32h
kube-public<span class="w">       </span>Active<span class="w">   </span>32h
kube-system<span class="w">       </span>Active<span class="w">   </span>32h
</code></pre></div></td></tr></table></div>
<p>Kubectl autocomplete</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y install bash-completion</span>
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># source &lt;(kubectl completion bash)</span>
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc</span>
</code></pre></div></td></tr></table></div>
<p>You can also use a shorthand alias for kubectl that also works with completion:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">k</span><span class="o">=</span>kubectl
<span class="nb">complete</span><span class="w"> </span>-o<span class="w"> </span>default<span class="w"> </span>-F<span class="w"> </span>__start_kubectl<span class="w"> </span>k
</code></pre></div></td></tr></table></div>
<h3 id="clusterip">ClusterIP</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl apply -f nginx.yaml -f tomcat.yaml</span>
deployment.apps/nginx<span class="w"> </span>created
deployment.apps/tomcat<span class="w"> </span>created
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl expose deployment nginx --type=ClusterIP --name=nginx-service --port=80 --target-port=80</span>
service/nginx-service<span class="w"> </span>exposed
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1">#</span>
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get pods -o wide</span>
NAME<span class="w">                      </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE<span class="w">    </span>IP<span class="w">            </span>NODE<span class="w">             </span>NOMINATED<span class="w"> </span>NODE<span class="w">   </span>READINESS<span class="w"> </span>GATES
nginx-698c667dd7-zrnrx<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m8s<span class="w">   </span><span class="m">172</span>.16.0.13<span class="w">   </span><span class="m">192</span>.168.34.211<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
tomcat-77b6db4bdd-x295j<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m8s<span class="w">   </span><span class="m">172</span>.16.0.12<span class="w">   </span><span class="m">192</span>.168.34.211<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get svc -o wide</span>
NAME<span class="w">            </span>TYPE<span class="w">        </span>CLUSTER-IP<span class="w">       </span>EXTERNAL-IP<span class="w">   </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">        </span>AGE<span class="w">   </span>SELECTOR
kubernetes<span class="w">      </span>ClusterIP<span class="w">   </span><span class="m">10</span>.247.0.1<span class="w">       </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">        </span>33h<span class="w">   </span>&lt;none&gt;
nginx-service<span class="w">   </span>ClusterIP<span class="w">    </span><span class="m">10</span>.247.156.240<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">80</span>:80/TCP<span class="w">   </span>36s<span class="w">   </span><span class="nv">app</span><span class="o">=</span>nginx
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get endpoints</span>
NAME<span class="w">            </span>ENDPOINTS<span class="w">             </span>AGE
kubernetes<span class="w">      </span><span class="m">192</span>.168.34.240:5444<span class="w">   </span>33h
nginx-service<span class="w">   </span><span class="m">172</span>.16.0.13:80<span class="w">        </span>49s
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl scale deployment nginx --replicas=2</span>
deployment.apps/nginx<span class="w"> </span>scaled
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get endpoints</span>
NAME<span class="w">            </span>ENDPOINTS<span class="w">                       </span>AGE
kubernetes<span class="w">      </span><span class="m">192</span>.168.34.240:5444<span class="w">             </span>33h
nginx-service<span class="w">   </span><span class="m">172</span>.16.0.13:80,172.16.0.14:80<span class="w">   </span>64s
</code></pre></div></td></tr></table></div>
<p>Access test like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl exec -it tomcat-77b6db4bdd-x295j -- /bin/bash</span>
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#

<span class="c1"># Access USE Pod IP </span>
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#<span class="w"> </span>curl<span class="w"> </span><span class="m">172</span>.16.0.13
&lt;!DOCTYPE<span class="w"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
&lt;style&gt;
html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;

&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

<span class="c1"># Access use ClusterIP</span>
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#<span class="w"> </span>curl<span class="w"> </span><span class="m">10</span>.247.156.240
&lt;!DOCTYPE<span class="w"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
&lt;style&gt;
html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;

&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

<span class="c1"># Access use service name</span>
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#<span class="w"> </span>curl<span class="w"> </span>nginx-service
&lt;!DOCTYPE<span class="w"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
&lt;style&gt;
html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;

&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

<span class="c1"># Access use Domain</span>
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#<span class="w"> </span>cat<span class="w"> </span>/etc/resolv.conf
search<span class="w"> </span>default.svc.cluster.local<span class="w"> </span>svc.cluster.local<span class="w"> </span>cluster.local
nameserver<span class="w"> </span><span class="m">10</span>.247.3.10
options<span class="w"> </span>ndots:5<span class="w"> </span>timeout:2<span class="w"> </span>single-request-reopen
root@tomcat-77b6db4bdd-x295j:/usr/local/tomcat#<span class="w"> </span>curl<span class="w"> </span>nginx-service.default.svc.cluster.local
&lt;!DOCTYPE<span class="w"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
&lt;style&gt;
html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;

&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="nodeport">nodeport</h3>
<p><a class="glightbox" href="../images/service-nodeport.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="nodeport" src="../images/service-nodeport.png" /></a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get svc nginx-service -o yaml</span>
apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Service
metadata:
<span class="w">  </span>creationTimestamp:<span class="w"> </span><span class="s2">&quot;2023-08-27T05:13:44Z&quot;</span>
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>nginx
<span class="w">  </span>name:<span class="w"> </span>nginx-service
<span class="w">  </span>namespace:<span class="w"> </span>default
<span class="w">  </span>resourceVersion:<span class="w"> </span><span class="s2">&quot;86260&quot;</span>
<span class="w">  </span>uid:<span class="w"> </span>fac3c03a-fb5d-4341-812f-cff661c9ebe2
spec:
<span class="w">  </span>clusterIP:<span class="w"> </span><span class="m">10</span>.247.156.240
<span class="w">  </span>clusterIPs:
<span class="w">  </span>-<span class="w"> </span><span class="m">10</span>.247.156.240
<span class="w">  </span>externalTrafficPolicy:<span class="w"> </span>Cluster
<span class="w">  </span>internalTrafficPolicy:<span class="w"> </span>Cluster
<span class="w">  </span>ipFamilies:
<span class="w">  </span>-<span class="w"> </span>IPv4
<span class="w">  </span>ipFamilyPolicy:<span class="w"> </span>SingleStack
<span class="w">  </span>ports:
<span class="w">  </span>-<span class="w"> </span>nodePort:<span class="w"> </span><span class="m">31428</span>
<span class="w">    </span>port:<span class="w"> </span><span class="m">80</span>
<span class="w">    </span>protocol:<span class="w"> </span>TCP
<span class="w">    </span>targetPort:<span class="w"> </span><span class="m">80</span>
<span class="w">  </span>selector:
<span class="w">    </span>app:<span class="w"> </span>nginx
<span class="w">  </span>sessionAffinity:<span class="w"> </span>None
<span class="w">  </span>type:<span class="w"> </span>NodePort
status:
<span class="w">  </span>loadBalancer:<span class="w"> </span><span class="o">{}</span>
</code></pre></div></td></tr></table></div>
<h3 id="loadbalancer">loadbalancer</h3>
<p><a class="glightbox" href="../images/service-loadbalancer.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="LoadBalancer" src="../images/service-loadbalancer.png" /></a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get service</span>
NAME<span class="w">         </span>TYPE<span class="w">           </span>CLUSTER-IP<span class="w">       </span>EXTERNAL-IP<span class="w">                     </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">           </span>AGE
kubernetes<span class="w">   </span>ClusterIP<span class="w">      </span><span class="m">10</span>.247.0.1<span class="w">       </span>&lt;none&gt;<span class="w">                          </span><span class="m">443</span>/TCP<span class="w">           </span>47h
nginx<span class="w">        </span>ClusterIP<span class="w">      </span><span class="m">10</span>.247.80.80<span class="w">     </span>&lt;none&gt;<span class="w">                          </span><span class="m">80</span>/TCP<span class="w">            </span>13h
nginx-elb<span class="w">    </span>LoadBalancer<span class="w">   </span><span class="m">10</span>.247.155.17<span class="w">    </span><span class="m">110</span>.238.103.45,192.168.34.190<span class="w">   </span><span class="m">80</span>:32337/TCP<span class="w">      </span>3m24s
nginx-node<span class="w">   </span>NodePort<span class="w">       </span><span class="m">10</span>.247.183.147<span class="w">   </span>&lt;none&gt;<span class="w">                          </span><span class="m">30080</span>:32180/TCP<span class="w">   </span>13h
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get svc nginx-elb -o yaml</span>
apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Service
metadata:
<span class="w">  </span>annotations:
<span class="w">    </span>kubernetes.io/elb.autocreate:<span class="w"> </span><span class="s1">&#39;{&quot;name&quot;:&quot;elb-test&quot;,&quot;type&quot;:&quot;public&quot;,&quot;bandwidth_name&quot;:&quot;cce-bandwidth-1693163374519&quot;,&quot;bandwidth_chargemode&quot;:&quot;traffic&quot;,&quot;bandwidth_size&quot;:5,&quot;bandwidth_sharetype&quot;:&quot;PER&quot;,&quot;eip_type&quot;:&quot;5_bgp&quot;}&#39;</span>
<span class="w">    </span>kubernetes.io/elb.class:<span class="w"> </span>union
<span class="w">    </span>kubernetes.io/elb.eip-id:<span class="w"> </span>fba071e4-58aa-407a-bf00-4f5fc28cd73d
<span class="w">    </span>kubernetes.io/elb.health-check-flag:<span class="w"> </span><span class="s2">&quot;on&quot;</span>
<span class="w">    </span>kubernetes.io/elb.health-check-option:<span class="w"> </span><span class="s1">&#39;{&quot;protocol&quot;:&quot;TCP&quot;,&quot;delay&quot;:&quot;5&quot;,&quot;timeout&quot;:&quot;10&quot;,&quot;max_retries&quot;:&quot;3&quot;}&#39;</span>
<span class="w">    </span>kubernetes.io/elb.id:<span class="w"> </span>a68106b8-f754-4369-8618-af21e8143dc3
<span class="w">    </span>kubernetes.io/elb.lb-algorithm:<span class="w"> </span>ROUND_ROBIN
<span class="w">    </span>kubernetes.io/elb.mark:<span class="w"> </span><span class="s2">&quot;0&quot;</span>
<span class="w">  </span>creationTimestamp:<span class="w"> </span><span class="s2">&quot;2023-08-27T19:10:37Z&quot;</span>
<span class="w">  </span>finalizers:
<span class="w">  </span>-<span class="w"> </span>service.kubernetes.io/load-balancer-cleanup
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>nginx
<span class="w">  </span>name:<span class="w"> </span>nginx-elb
<span class="w">  </span>namespace:<span class="w"> </span>default
<span class="w">  </span>resourceVersion:<span class="w"> </span><span class="s2">&quot;119775&quot;</span>
<span class="w">  </span>uid:<span class="w"> </span><span class="m">53191067</span>-b9aa-4cc3-84df-ec4d5cbada74
spec:
<span class="w">  </span>allocateLoadBalancerNodePorts:<span class="w"> </span><span class="nb">true</span>
<span class="w">  </span>clusterIP:<span class="w"> </span><span class="m">10</span>.247.155.17
<span class="w">  </span>clusterIPs:
<span class="w">  </span>-<span class="w"> </span><span class="m">10</span>.247.155.17
<span class="w">  </span>externalTrafficPolicy:<span class="w"> </span>Cluster
<span class="w">  </span>internalTrafficPolicy:<span class="w"> </span>Cluster
<span class="w">  </span>ipFamilies:
<span class="w">  </span>-<span class="w"> </span>IPv4
<span class="w">  </span>ipFamilyPolicy:<span class="w"> </span>SingleStack
<span class="w">  </span>loadBalancerIP:<span class="w"> </span><span class="m">110</span>.238.103.45
<span class="w">  </span>ports:
<span class="w">  </span>-<span class="w"> </span>name:<span class="w"> </span>cce-service-0
<span class="w">    </span>nodePort:<span class="w"> </span><span class="m">32337</span>
<span class="w">    </span>port:<span class="w"> </span><span class="m">80</span>
<span class="w">    </span>protocol:<span class="w"> </span>TCP
<span class="w">    </span>targetPort:<span class="w"> </span><span class="m">80</span>
<span class="w">  </span>selector:
<span class="w">    </span>app:<span class="w"> </span>nginx
<span class="w">  </span>sessionAffinity:<span class="w"> </span>None
<span class="w">  </span>type:<span class="w"> </span>LoadBalancer
status:
<span class="w">  </span>loadBalancer:
<span class="w">    </span>ingress:
<span class="w">    </span>-<span class="w"> </span>ip:<span class="w"> </span><span class="m">110</span>.238.103.45
<span class="w">    </span>-<span class="w"> </span>ip:<span class="w"> </span><span class="m">192</span>.168.34.190
</code></pre></div></td></tr></table></div>
<p><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_10_0681.html">loadbalancer</a></p>
<p><a href="https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0024.html">service</a></p>
<h2 id="2-elb-ingress-nginx-ingress">2. ELB Ingress &amp; Nginx Ingress</h2>
<h3 id="elb-ingress">ELB Ingress</h3>
<p><a class="glightbox" href="../images/elb-ingress.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="ELB Ingress" src="../images/elb-ingress.png" /></a></p>
<p>Access use the domain:</p>
<p><a class="glightbox" href="../images/curl-elb-ingress.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="curl Ingress" src="../images/curl-elb-ingress.png" /></a></p>
<h3 id="nginx-ingress">Nginx Ingress</h3>
<p>Install the nginx-ingress plug-in and create a policy:</p>
<p><a class="glightbox" href="../images/nginx-ingress-elb.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="nginx elb ingress" src="../images/nginx-ingress-elb.png" /></a></p>
<p>Because we didnot have the domain, so we can add the hosts record to verify. we need add the DNS A record if we have a real domain.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># cat /etc/hosts</span>
::1<span class="w">     </span>localhost<span class="w">       </span>localhost.localdomain<span class="w">   </span>localhost6<span class="w">      </span>localhost6.localdomain6
<span class="m">127</span>.0.0.1<span class="w">       </span>localhost<span class="w">       </span>localhost.localdomain<span class="w">   </span>localhost4<span class="w">      </span>localhost4.localdomain4
<span class="m">127</span>.0.0.1<span class="w">       </span>ecs-c5e5<span class="w">        </span>ecs-c5e5
<span class="m">110</span>.238.103.45<span class="w"> </span>www.abc.com
<span class="m">110</span>.238.103.45<span class="w"> </span>java.abc.com
<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># curl -I java.abc.com</span>
HTTP/1.1<span class="w"> </span><span class="m">200</span>
Date:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">28</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">11</span>:41:41<span class="w"> </span>GMT
Content-Type:<span class="w"> </span>text/html<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
Content-Length:<span class="w"> </span><span class="m">3084</span>
Connection:<span class="w"> </span>keep-alive
Last-Modified:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">28</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">01</span>:01:15<span class="w"> </span>GMT
Accept-Ranges:<span class="w"> </span>bytes
Content-Language:<span class="w"> </span>en-US

<span class="o">[</span>root@ecs-c5e5<span class="w"> </span>~<span class="o">]</span><span class="c1"># curl www.abc.com</span>
&lt;!DOCTYPE<span class="w"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
&lt;style&gt;
html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;

&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></td></tr></table></div>
<p><a href="https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0025.html">Ingress</a></p>





                
  

              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        

<footer class="md-footer">
  
    <nav
      class="md-footer__inner md-grid"
      aria-label="footer.title"
    >
      
        <a
          href="../cce-network/"
          class="md-footer__link md-footer__link--prev"
          rel="prev"
        >
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              cce network
            </div>
          </div>
        </a>
      
      
        <a
          href="../05-scale-cce/"
          class="md-footer__link md-footer__link--next"
          rel="next"
        >
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              cce scale
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        with emoji by
        <a href="https://github.com/twitter/twemoji" target="_blank" rel="noopener">
          Twemoji
        </a>
      </div>
      <div class="md-social">
  
    
    
    
    
    <a href="mailto: itybku@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.path", "navigation.instant", "navigation.instant.prefetch", "navigation.top", "content.code.copy", "navigation.footer", {"toc": true}, {"hide_on_mobile": true, "sidebar": null}], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
        <script src="../../assets/pymdownx-extras/extra-loader-q9CWAeV9.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>